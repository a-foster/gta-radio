<html>
<body
    style="background-color: black;background-image: url('images/gta.jpg');background-repeat: no-repeat;background-attachment: fixed;background-position: center;">
    <div class="circle-wrapper">
        <div class="circle deg-300" data-station="fever_105">
            <audio controls loop id="fever_105">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/fever_105.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('fever_105')" type="image" class="station_icons" src="images/fever_105.png" />
        </div>
        <div class="circle deg-330" data-station="wave_103">
            <audio controls loop id="wave_103">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/wave_103.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('wave_103')" type="image" class="station_icons" src="images/wave_103.svg" />
        </div>
        <div class="circle deg-0" data-station="flash_fm">
            <audio controls loop id="flash_fm">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/flash_fm.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('flash_fm')" type="image" class="station_icons" src="images/flash_fm.png" />
        </div>
        <div class="circle deg-180" data-station="emotion">
            <audio controls loop id="emotion">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/emotion.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('emotion')" type="image" class="station_icons" src="images/emotion.svg" />
        </div>
        <div class="circle deg-60" data-station="k_dst">
            <audio controls loop id="k_dst">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/k_dst.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('k_dst')" type="image" class="station_icons" src="images/k_dst.png" />
        </div>
        <div class="circle deg-90" data-station="k_rose">
            <audio controls loop id="k_rose">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/k_rose.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('k_rose')" type="image" class="station_icons" src="images/k_rose.svg" />
        </div>
        <div class="circle deg-120" data-station="los_santos_rock">
            <audio controls loop id="los_santos_rock">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/los_santos_rock.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('los_santos_rock')" type="image" class="station_icons" src="images/los_santos_rock.png" />
        </div>
        <div class="circle deg-150" data-station="non_stop_pop">
            <audio controls loop id="non_stop_pop">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/non_stop_pop.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('non_stop_pop')" type="image" class="station_icons" src="images/non_stop_pop.png" />
        </div>
        <div class="circle deg-30" data-station="radio_mirror_park">
            <audio controls loop id="radio_mirror_park">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/radio_mirror_park.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('radio_mirror_park')" type="image" class="station_icons" src="images/radio_mirror_park.png" />
        </div>
        <div class="circle deg-210" data-station="worldwide">
            <audio controls loop id="worldwide">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/worldwide.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('worldwide')" type="image" class="station_icons" src="images/worldwide.png" />
        </div>
        <div class="circle deg-240" data-station="vladivostok">
            <audio controls loop id="vladivostok">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/vladivostok.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('vladivostok')" type="image" class="station_icons" src="images/vladivostok.png" />
        </div>
        <div class="circle deg-270" data-station="west_coast_classics">
            <audio controls loop id="west_coast_classics">
                <source src="https://s3.eu-west-1.amazonaws.com/gta-radio.foztech.co.uk/stations/west_coast_classics.mp3" type="audio/mp3">
            </audio>
            <input onclick="playStation('west_coast_classics')" type="image" class="station_icons" src="images/west_coast_classics.png" />
        </div>
        <div class="knob-container">
            <div class="knob-base">
                <div class="knob-pointer" id="knob-pointer"></div>
                <div class="knob-center"></div>
            </div>
        </div>
    </div>
    <div class="controls-wrapper">
        <button id="play-pause-btn" onclick="togglePlayPause()">
            <span id="play-icon">▶</span>
            <span id="pause-icon" style="display:none;">⏸</span>
        </button>
        <div class="volume-control">
            <input type="range" id="volume-slider" min="0" max="100" value="80"
                   oninput="setVolume(this.value)">
        </div>
    </div>
    <audio controls id="beep">
        <source src="sound_effects/beep.mp3" type="audio/mp3">
    </audio>
</body>
</html>
<style>
    audio {
        display: none !important;
    }

    .station_icons {
        max-width: 70px;
        max-height: 70px;
        width: auto;
        height: auto;
        object-fit: contain;
    }

    .circle-wrapper {
        width: 501px;
        height: 501px;
        border-radius: 51%;
        margin: auto;
        margin-top: 30%;
        position: relative;
    }

    .circle {
        display: flex;
        align-items: center;
        justify-content: center;
        position: absolute;
        top: 29%;
        left: 50%;
        width: 100px;
        height: 100px;
        margin: -51px;
        border-radius: 50%;
        background-color: rgba(0, 0, 0, 0.5);
        border: 2px solid rgba(255, 255, 255, 0.2);
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
    }

    .circle:hover {
        background-color: rgba(0, 0, 0, 0.7);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
    }

    .circle.active {
        background-color: rgba(255, 165, 0, 0.4);
        box-shadow: 0 0 20px rgba(255, 165, 0, 0.5);
    }

    .deg-0 {
        transform: translate(251px)
    }

    .deg-30 {
        transform: rotate(31deg) translate(251px) rotate(-31deg);
    }

    .deg-60 {
        transform: rotate(61deg) translate(251px) rotate(-61deg);
    }

    .deg-90 {
        transform: rotate(91deg) translate(251px) rotate(-91deg);
    }

    .deg-120 {
        transform: rotate(121deg) translate(251px) rotate(-121deg);
    }

    .deg-150 {
        transform: rotate(151deg) translate(251px) rotate(-151deg);
    }

    .deg-180 {
        transform: rotate(181deg) translate(251px) rotate(-181deg);
    }

    .deg-210 {
        transform: rotate(211deg) translate(251px) rotate(-211deg);
    }

    .deg-240 {
        transform: rotate(241deg) translate(251px) rotate(-241deg);
    }

    .deg-270 {
        transform: rotate(271deg) translate(251px) rotate(-271deg);
    }

    .deg-300 {
        transform: rotate(301deg) translate(251px) rotate(-301deg);
    }

    .deg-330 {
        transform: rotate(331deg) translate(251px) rotate(-331deg);
    }

    /* Knob styles */
    .knob-container {
        position: absolute;
        top: 29%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .knob-base {
        width: 80px;
        height: 80px;
        background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
        border-radius: 50%;
        position: relative;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5), inset 0 2px 5px rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.1);
    }

    .knob-pointer {
        position: absolute;
        width: 4px;
        height: 30px;
        background: linear-gradient(to top, #ff6600, #ffaa00);
        left: 50%;
        top: 5px;
        transform: translateX(-50%);
        border-radius: 2px;
        box-shadow: 0 0 10px rgba(255, 102, 0, 0.5);
        transition: transform 0.3s ease;
        transform-origin: center 35px;
    }

    .knob-center {
        position: absolute;
        width: 20px;
        height: 20px;
        background: linear-gradient(145deg, #444, #222);
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.5);
    }

    /* Controls wrapper */
    .controls-wrapper {
        position: fixed;
        bottom: 30px;
        left: 30px;
        display: flex;
        align-items: center;
        gap: 15px;
        background-color: rgba(0, 0, 0, 0.7);
        padding: 15px 20px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    #play-pause-btn {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        border: none;
        background: linear-gradient(145deg, #ff6600, #cc5200);
        color: white;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 4px 10px rgba(255, 102, 0, 0.3);
    }

    #play-pause-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 15px rgba(255, 102, 0, 0.5);
    }

    .volume-control {
        display: flex;
        align-items: center;
    }

    #volume-slider {
        width: 120px;
        height: 6px;
        -webkit-appearance: none;
        appearance: none;
        background: linear-gradient(to right, #ff6600, #ffaa00);
        border-radius: 3px;
        outline: none;
        cursor: pointer;
    }

    #volume-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        background: white;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    #volume-slider::-moz-range-thumb {
        width: 18px;
        height: 18px;
        background: white;
        border-radius: 50%;
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }
</style>
<script>
    // State variables
    let currentStation = null;
    let isPlaying = false;

    // Station angle mapping for knob rotation (CSS degrees + 90 offset)
    const stationAngles = {
        'flash_fm': 90,
        'radio_mirror_park': 121,
        'k_dst': 151,
        'k_rose': 181,
        'los_santos_rock': 211,
        'non_stop_pop': 241,
        'emotion': 271,
        'worldwide': 301,
        'vladivostok': 331,
        'west_coast_classics': 1,
        'fever_105': 31,
        'wave_103': 61
    };

    window.onload = function() {
        setAllAudioTimes();
        // Set initial volume
        setVolume(80);
    };

    async function playStation(stationName) {
        // start by pausing all stations
        let allStations = document.getElementsByTagName('audio')
        for (var i = allStations.length - 1; i >= 0; i--) {
            allStations[i].pause();
        }

        // Remove active class from all circles
        document.querySelectorAll('.circle').forEach(circle => {
            circle.classList.remove('active');
        });

        // Add active class to current station's circle
        const activeCircle = document.querySelector(`.circle[data-station="${stationName}"]`);
        if (activeCircle) {
            activeCircle.classList.add('active');
        }

        // play change station sound effect
        document.getElementById('beep').play();
        await new Promise(r => setTimeout(r, 400));

        // update audio times to 'current' time
        setAllAudioTimes()

        // now play this station, but wait for beep to finish
        document.getElementById(stationName).play();

        // Update state
        currentStation = stationName;
        isPlaying = true;
        updatePlayPauseButton();

        // Rotate knob to point at station
        rotateKnob(stationName);
    }

    // Rotate knob to point at the current station
    function rotateKnob(stationName) {
        const angle = stationAngles[stationName];
        if (angle !== undefined) {
            const knobPointer = document.getElementById('knob-pointer');
            knobPointer.style.transform = `translateX(-50%) rotate(${angle}deg)`;
        }
    }

    // Toggle play/pause for current station
    function togglePlayPause() {
        if (!currentStation) return;

        const audio = document.getElementById(currentStation);
        if (isPlaying) {
            audio.pause();
            isPlaying = false;
        } else {
            audio.play();
            isPlaying = true;
        }
        updatePlayPauseButton();
    }

    // Update play/pause button icons
    function updatePlayPauseButton() {
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');
        if (isPlaying) {
            playIcon.style.display = 'none';
            pauseIcon.style.display = 'inline';
        } else {
            playIcon.style.display = 'inline';
            pauseIcon.style.display = 'none';
        }
    }

    // Set volume on all audio elements
    function setVolume(value) {
        const volume = value / 100;
        const audioElements = document.querySelectorAll('audio');
        audioElements.forEach(audio => {
            audio.volume = volume;
        });
    }

    // set current seconds on all audio elements so they play from the same point
    function setAllAudioTimes() {
        let audioElements = document.querySelectorAll('audio')
        for (var i = audioElements.length - 1; i >= 0; i--) {
            setAudioTime(audioElements[i]);
        }
    }

    // tracks are one hour each so get the time within current hour
    function getCurrentSeconds() {
        const d = new Date();
        let minutes = d.getMinutes();
        let seconds = d.getSeconds();
        return minutes * 60 + seconds;
    }

    // set current seconds on an audio element
    function setAudioTime(audioElement) {
        audioElement.currentTime = getCurrentSeconds();
    }

</script>